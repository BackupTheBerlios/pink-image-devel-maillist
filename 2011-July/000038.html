<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Pink-image-devel] Memory not being free()
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/pink-image-devel/2011-July/index.html" >
   <LINK REL="made" HREF="mailto:pink-image-devel%40lists.berlios.de?Subject=Re%3A%20%5BPink-image-devel%5D%20Memory%20not%20being%20free%28%29&In-Reply-To=%3C17AF0034-63AF-4135-8165-402C17B43CB2%40esiee.fr%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000037.html">
   <LINK REL="Next"  HREF="000039.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Pink-image-devel] Memory not being free()</H1>
    <B>Hugues Talbot</B> 
    <A HREF="mailto:pink-image-devel%40lists.berlios.de?Subject=Re%3A%20%5BPink-image-devel%5D%20Memory%20not%20being%20free%28%29&In-Reply-To=%3C17AF0034-63AF-4135-8165-402C17B43CB2%40esiee.fr%3E"
       TITLE="[Pink-image-devel] Memory not being free()">h.talbot at esiee.fr
       </A><BR>
    <I>Wed Jul 27 07:59:55 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="000037.html">[Pink-image-devel] Memory not being free()
</A></li>
        <LI>Next message: <A HREF="000039.html">[Pink-image-devel] Memory not being free()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Laszlo,

can you take a look at this as a matter of priority ?

Thanks !

On 27 Jul 2011, at 27 Jul, 7:49, Michael Cheng wrote:

&gt;<i> Hi all,
</I>&gt;<i> 
</I>&gt;<i> I have some large jobs processing thousands of images, and I've noticed that image memory isn't being free'd after the python object holding the image falls out of scope.  So my memory usage is going through the roof! (All the real memory I have and hundreds of GB of virtual memory!)
</I>&gt;<i> 
</I>&gt;<i> My Steup:
</I>&gt;<i> * macosx 10.6.8
</I>&gt;<i> * pink r558
</I>&gt;<i> 
</I>&gt;<i> An example to replicate the problem is below. Start 'Activity Monitor' and sort processes by memory usage and watch it grow and grow!
</I>&gt;<i> 
</I>&gt;<i> &gt; python
</I>&gt;<i> &gt; import pink
</I>&gt;<i> 
</I>&gt;<i> &gt; im = pink.cpp.readimage('test.pgm')
</I>&gt;<i> &gt; del im
</I>&gt;<i> &gt; im = pink.cpp.readimage('test.pgm')
</I>&gt;<i> &gt; del im
</I>&gt;<i> &gt; im = pink.cpp.readimage('test.pgm')
</I>&gt;<i> &gt; del im
</I>&gt;<i> &gt; im = pink.cpp.readimage('test.pgm')
</I>&gt;<i> &gt; del im
</I>&gt;<i> &gt; im = pink.cpp.readimage('test.pgm')
</I>&gt;<i> &gt; del im
</I>&gt;<i> etc
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Memory is allocated each time an image object is created but it it never freed after the object is deleted.  Explicit calls to the garbage collector in python does not free any more memory.  I'm guessing that somewhere in the pink c++ internals, memory isn't being freed.
</I>&gt;<i> 
</I>&gt;<i> Are there any suggestions or workarounds for this?  Is there a command I'm missing?  Is there a way to force pink to free the allocated memory for an object?  Should python/pink be doing this automatically?
</I>&gt;<i> 
</I>&gt;<i> Mike.
</I>
===
Hugues Talbot, Professeur associ&#233;
Universit&#233; Paris-Est,
Laboratoire d'informatique Gaspard-Monge
Equipe A3SI 
ESIEE - BP 99 
2 bd Blaise-Pascal, F-93162 Noisy-le-Grand Cedex
(Office) +33 1 45 92 66 15 / (Fax) +33 1 45 92 66 99

The lyf so short, the craft so long to lerne, The'assay so hard, so sharp the conqueryinge (Chaucer)



-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/pink-image-devel/attachments/20110727/8931e42a/attachment.html">https://lists.berlios.de/pipermail/pink-image-devel/attachments/20110727/8931e42a/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000037.html">[Pink-image-devel] Memory not being free()
</A></li>
	<LI>Next message: <A HREF="000039.html">[Pink-image-devel] Memory not being free()
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#38">[ date ]</a>
              <a href="thread.html#38">[ thread ]</a>
              <a href="subject.html#38">[ subject ]</a>
              <a href="author.html#38">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/pink-image-devel">More information about the Pink-image-devel
mailing list</a><br>
</body></html>
